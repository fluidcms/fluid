require(['bootstrap'], function () {
    require(['backbone', 'marionette', 'ejs', 'controllers/offline'], function (Backbone, Marionette, EJS, OfflineController) {
        Backbone.Marionette.Renderer.render = function(template, data) {
            return template.render(data);
        };

        var OfflineApp = new Marionette.Application();

        OfflineApp.addRegions({
            mainRegion: "#main"
        });

        OfflineApp.addInitializer(function(options){
            new OfflineController({app: OfflineApp}).login();


            // do useful stuff here
            /*var myView = new MyView({
                model: options.someModel
            });
            MyApp.mainRegion.show(myView);*/
        });

        OfflineApp.addInitializer(function(options){
            Backbone.history.start({pushState: true, root: window.location.pathname});
        });

        OfflineApp.start();
    });
});